# 表设计
### 基础规则
- 统一使用InnoDB存储引擎，utf8mb4字符集，utf8mb4_general_ci排序。
- 数据库对象名不能使用MySQL保留关键字。
- 数据库对象名必须使用英文名称或者英文缩写，禁止使用拼音。
- 数据库对象名只能由小写字母、数字、下划数组成，禁止出现数字开头，禁止两个下划线中间只出现数字。

正例：
```
pa_user
avatar
user_config
idx_mobile
```
反例：
```
SystemAdmin
logConfig
level_3_name
```

- 禁止使用存储过程，存储过程难以调试和扩展，更没有移植性。
- 禁止使用触发器、视图，应由ORM实现。

### 表
- 表名必须要有前缀，使用业务系统的英文缩写，以2-4字符为宜。
- 表名不使用复数名词。
表名应该仅表示实体内容，不应该表示实体数量，对应模型类名也是单数形式，符合表达习惯。

- 默认添加 create_time、update_time、delete_time 字段，类型为 int，分别表示创建时间、更新时间、软删除时间。

### 字段
- 字段命名要简单贴切，不要加入具备表名含义的前缀。
- 除非必要，所有主键均为自增 int 类型，并命名为 id。
- 除非必要，所有字段均为 not null，并给定默认值。
- 所有字段必须要有注释，表明字段含义。
- 整数类型按需求使用int、tinyint、bigint，不要指定宽度。
- 小数类型使用decimal，禁止使用float和double。
float和double都存在精度损失的问题，很可能在比较值的时候，得到不正确的结果。

- 表达日期和时间相关的字段，应使用 xxx_time 的命名，使用 int 存储时间戳。
- 表达是与否概念的字段，应使用 xxx_time 方式保存操作时间，在ORM中实现 is_xxx 方便引用。
- 表达状态或枚举的字段，应使用 tinyint 类型，并在注释中说明状态值。
- 如果存储的字符串长度几乎相等，应使用 char 定长字符串类型。
- 关联外键，使用 {不含前缀表名}\_id 命名，符合ORM关联模型定义。
- 尽可能不使用text类型的字段，如果需要，单独创建text表，通过关联ID使用。
- 字段允许适当冗余，以提高查询性能，但必须考虑数据一致。

### 索引
- 主键索引名为 pk\_{字段名}；唯一索引名为 uk\_{字段名}；普通索引名为 idx\_{字段名}。
- 创建组合索引时，区分度最高的在最左。
- order by的字段应当是组合索引的一部分。
- 除非表规模小，搜索禁止左模糊或者全模糊，如果需要走Elasticsearch方案来解决。


